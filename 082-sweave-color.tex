\documentclass{article}\usepackage[]{graphicx}\usepackage[]{color}
% maxwidth is the original width if it is less than linewidth
% otherwise use linewidth (to make sure the graphics do not exceed the margin)
\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\usepackage{Sweave}


\usepackage[x11names]{xcolor}
\DefineVerbatimEnvironment{Sinput}{Verbatim}{formatcom=\color{Blue3}}
\DefineVerbatimEnvironment{Soutput}{Verbatim}{formatcom=\color{gray}}
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\begin{document}


Test. Source code is {\color{Blue3}Blue3}, and output is {\color{gray}gray}.
\begin{Schunk}
\begin{Sinput}
> 1 + 1
\end{Sinput}
\begin{Soutput}
[1] 2
\end{Soutput}
\begin{Sinput}
> rnorm(5)
\end{Sinput}
\begin{Soutput}
[1] -0.56048 -0.23018  1.55871  0.07051  0.12929
\end{Soutput}
\end{Schunk}

\end{document}
