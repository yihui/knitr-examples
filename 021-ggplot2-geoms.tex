\documentclass[a4paper,titlepage]{tufte-handout}\usepackage[]{graphicx}\usepackage[]{color}
% maxwidth is the original width if it is less than linewidth
% otherwise use linewidth (to make sure the graphics do not exceed the margin)
\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\definecolor{fgcolor}{rgb}{0.345, 0.345, 0.345}
\makeatletter
\@ifundefined{AddToHook}{}{\AddToHook{package/xcolor/after}{\definecolor{fgcolor}{rgb}{0.345, 0.345, 0.345}}}
\makeatother
\newcommand{\hlnum}[1]{\textcolor[rgb]{0.686,0.059,0.569}{#1}}%
\newcommand{\hlstr}[1]{\textcolor[rgb]{0.192,0.494,0.8}{#1}}%
\newcommand{\hlcom}[1]{\textcolor[rgb]{0.678,0.584,0.686}{\textit{#1}}}%
\newcommand{\hlopt}[1]{\textcolor[rgb]{0,0,0}{#1}}%
\newcommand{\hlstd}[1]{\textcolor[rgb]{0.345,0.345,0.345}{#1}}%
\newcommand{\hlkwa}[1]{\textcolor[rgb]{0.161,0.373,0.58}{\textbf{#1}}}%
\newcommand{\hlkwb}[1]{\textcolor[rgb]{0.69,0.353,0.396}{#1}}%
\newcommand{\hlkwc}[1]{\textcolor[rgb]{0.333,0.667,0.333}{#1}}%
\newcommand{\hlkwd}[1]{\textcolor[rgb]{0.737,0.353,0.396}{\textbf{#1}}}%
\let\hlipl\hlkwb

\usepackage{framed}
\makeatletter
\newenvironment{kframe}{%
 \def\at@end@of@kframe{}%
 \ifinner\ifhmode%
  \def\at@end@of@kframe{\end{minipage}}%
  \begin{minipage}{\columnwidth}%
 \fi\fi%
 \def\FrameCommand##1{\hskip\@totalleftmargin \hskip-\fboxsep
 \colorbox{shadecolor}{##1}\hskip-\fboxsep
     % There is no \\@totalrightmargin, so:
     \hskip-\linewidth \hskip-\@totalleftmargin \hskip\columnwidth}%
 \MakeFramed {\advance\hsize-\width
   \@totalleftmargin\z@ \linewidth\hsize
   \@setminipage}}%
 {\par\unskip\endMakeFramed%
 \at@end@of@kframe}
\makeatother

\definecolor{shadecolor}{rgb}{.97, .97, .97}
\definecolor{messagecolor}{rgb}{0, 0, 0}
\definecolor{warningcolor}{rgb}{1, 0, 1}
\definecolor{errorcolor}{rgb}{1, 0, 0}
\makeatletter
\@ifundefined{AddToHook}{}{\AddToHook{package/xcolor/after}{
\definecolor{shadecolor}{rgb}{.97, .97, .97}
\definecolor{messagecolor}{rgb}{0, 0, 0}
\definecolor{warningcolor}{rgb}{1, 0, 1}
\definecolor{errorcolor}{rgb}{1, 0, 0}
}}
\makeatother
\newenvironment{knitrout}{}{} % an empty environment to be redefined in TeX

\usepackage{alltt}
\title{ggplot2 Gallery}
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\begin{document}
\maketitle
\tableofcontents



% the first 10 geoms in ggplot2



\section{geom\_abline}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlcom{### Name: geom_abline}
\hlcom{### Title: Reference lines: horizontal, vertical, and diagonal}
\hlcom{### Aliases: geom_abline geom_hline geom_vline}

\hlcom{### ** Examples}

\hlstd{p} \hlkwb{<-} \hlkwd{ggplot}\hlstd{(mtcars,} \hlkwd{aes}\hlstd{(wt, mpg))} \hlopt{+} \hlkwd{geom_point}\hlstd{()}

\hlcom{# Fixed values}
\hlstd{p} \hlopt{+} \hlkwd{geom_vline}\hlstd{(}\hlkwc{xintercept} \hlstd{=} \hlnum{5}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_abline-1} 
\begin{kframe}\begin{alltt}
\hlstd{p} \hlopt{+} \hlkwd{geom_vline}\hlstd{(}\hlkwc{xintercept} \hlstd{=} \hlnum{1}\hlopt{:}\hlnum{5}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_abline-2} 
\begin{kframe}\begin{alltt}
\hlstd{p} \hlopt{+} \hlkwd{geom_hline}\hlstd{(}\hlkwc{yintercept} \hlstd{=} \hlnum{20}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_abline-3} 
\begin{kframe}\begin{alltt}
\hlstd{p} \hlopt{+} \hlkwd{geom_abline}\hlstd{()} \hlcom{# Can't see it - outside the range of the data}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_abline-4} 
\begin{kframe}\begin{alltt}
\hlstd{p} \hlopt{+} \hlkwd{geom_abline}\hlstd{(}\hlkwc{intercept} \hlstd{=} \hlnum{20}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_abline-5} 
\begin{kframe}\begin{alltt}
\hlcom{# Calculate slope and intercept of line of best fit}
\hlkwd{coef}\hlstd{(}\hlkwd{lm}\hlstd{(mpg} \hlopt{~} \hlstd{wt,} \hlkwc{data} \hlstd{= mtcars))}
\end{alltt}
\begin{verbatim}
## (Intercept)          wt 
##      37.285      -5.344
\end{verbatim}
\begin{alltt}
\hlstd{p} \hlopt{+} \hlkwd{geom_abline}\hlstd{(}\hlkwc{intercept} \hlstd{=} \hlnum{37}\hlstd{,} \hlkwc{slope} \hlstd{=} \hlopt{-}\hlnum{5}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_abline-6} 
\begin{kframe}\begin{alltt}
\hlcom{# But this is easier to do with geom_smooth:}
\hlstd{p} \hlopt{+} \hlkwd{geom_smooth}\hlstd{(}\hlkwc{method} \hlstd{=} \hlstr{"lm"}\hlstd{,} \hlkwc{se} \hlstd{=} \hlnum{FALSE}\hlstd{)}
\end{alltt}


{\ttfamily\noindent\itshape\color{messagecolor}{\#\# `geom\_smooth()` using formula 'y \textasciitilde{} x'}}\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_abline-7} 
\begin{kframe}\begin{alltt}
\hlcom{# To show different lines in different facets, use aesthetics}
\hlstd{p} \hlkwb{<-} \hlkwd{ggplot}\hlstd{(mtcars,} \hlkwd{aes}\hlstd{(mpg, wt))} \hlopt{+}
  \hlkwd{geom_point}\hlstd{()} \hlopt{+}
  \hlkwd{facet_wrap}\hlstd{(}\hlopt{~} \hlstd{cyl)}

\hlstd{mean_wt} \hlkwb{<-} \hlkwd{data.frame}\hlstd{(}\hlkwc{cyl} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{4}\hlstd{,} \hlnum{6}\hlstd{,} \hlnum{8}\hlstd{),} \hlkwc{wt} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{2.28}\hlstd{,} \hlnum{3.11}\hlstd{,} \hlnum{4.00}\hlstd{))}
\hlstd{p} \hlopt{+} \hlkwd{geom_hline}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{yintercept} \hlstd{= wt), mean_wt)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_abline-8} 
\begin{kframe}\begin{alltt}
\hlcom{# You can also control other aesthetics}
\hlkwd{ggplot}\hlstd{(mtcars,} \hlkwd{aes}\hlstd{(mpg, wt,} \hlkwc{colour} \hlstd{= wt))} \hlopt{+}
  \hlkwd{geom_point}\hlstd{()} \hlopt{+}
  \hlkwd{geom_hline}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{yintercept} \hlstd{= wt,} \hlkwc{colour} \hlstd{= wt), mean_wt)} \hlopt{+}
  \hlkwd{facet_wrap}\hlstd{(}\hlopt{~} \hlstd{cyl)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_abline-9} 
\end{knitrout}


\section{geom\_area}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlcom{### Name: geom_ribbon}
\hlcom{### Title: Ribbons and area plots}
\hlcom{### Aliases: geom_ribbon geom_area}

\hlcom{### ** Examples}

\hlcom{# Generate data}
\hlstd{huron} \hlkwb{<-} \hlkwd{data.frame}\hlstd{(}\hlkwc{year} \hlstd{=} \hlnum{1875}\hlopt{:}\hlnum{1972}\hlstd{,} \hlkwc{level} \hlstd{=} \hlkwd{as.vector}\hlstd{(LakeHuron))}
\hlstd{h} \hlkwb{<-} \hlkwd{ggplot}\hlstd{(huron,} \hlkwd{aes}\hlstd{(year))}

\hlstd{h} \hlopt{+} \hlkwd{geom_ribbon}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{ymin}\hlstd{=}\hlnum{0}\hlstd{,} \hlkwc{ymax}\hlstd{=level))}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_area-1} 
\begin{kframe}\begin{alltt}
\hlstd{h} \hlopt{+} \hlkwd{geom_area}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{y} \hlstd{= level))}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_area-2} 
\begin{kframe}\begin{alltt}
\hlcom{# Orientation cannot be deduced by mapping, so must be given explicitly for}
\hlcom{# flipped orientation}
\hlstd{h} \hlopt{+} \hlkwd{geom_area}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{x} \hlstd{= level,} \hlkwc{y} \hlstd{= year),} \hlkwc{orientation} \hlstd{=} \hlstr{"y"}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_area-3} 
\begin{kframe}\begin{alltt}
\hlcom{# Add aesthetic mappings}
\hlstd{h} \hlopt{+}
  \hlkwd{geom_ribbon}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{ymin} \hlstd{= level} \hlopt{-} \hlnum{1}\hlstd{,} \hlkwc{ymax} \hlstd{= level} \hlopt{+} \hlnum{1}\hlstd{),} \hlkwc{fill} \hlstd{=} \hlstr{"grey70"}\hlstd{)} \hlopt{+}
  \hlkwd{geom_line}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{y} \hlstd{= level))}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_area-4} 
\end{knitrout}


\section{geom\_bar}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlcom{### Name: geom_bar}
\hlcom{### Title: Bar charts}
\hlcom{### Aliases: geom_bar geom_col stat_count}

\hlcom{### ** Examples}

\hlcom{# geom_bar is designed to make it easy to create bar charts that show}
\hlcom{# counts (or sums of weights)}
\hlstd{g} \hlkwb{<-} \hlkwd{ggplot}\hlstd{(mpg,} \hlkwd{aes}\hlstd{(class))}
\hlcom{# Number of cars in each class:}
\hlstd{g} \hlopt{+} \hlkwd{geom_bar}\hlstd{()}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_bar-1} 
\begin{kframe}\begin{alltt}
\hlcom{# Total engine displacement of each class}
\hlstd{g} \hlopt{+} \hlkwd{geom_bar}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{weight} \hlstd{= displ))}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_bar-2} 
\begin{kframe}\begin{alltt}
\hlcom{# Map class to y instead to flip the orientation}
\hlkwd{ggplot}\hlstd{(mpg)} \hlopt{+} \hlkwd{geom_bar}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{y} \hlstd{= class))}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_bar-3} 
\begin{kframe}\begin{alltt}
\hlcom{# Bar charts are automatically stacked when multiple bars are placed}
\hlcom{# at the same location. The order of the fill is designed to match}
\hlcom{# the legend}
\hlstd{g} \hlopt{+} \hlkwd{geom_bar}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{fill} \hlstd{= drv))}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_bar-4} 
\begin{kframe}\begin{alltt}
\hlcom{# If you need to flip the order (because you've flipped the orientation)}
\hlcom{# call position_stack() explicitly:}
\hlkwd{ggplot}\hlstd{(mpg,} \hlkwd{aes}\hlstd{(}\hlkwc{y} \hlstd{= class))} \hlopt{+}
 \hlkwd{geom_bar}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{fill} \hlstd{= drv),} \hlkwc{position} \hlstd{=} \hlkwd{position_stack}\hlstd{(}\hlkwc{reverse} \hlstd{=} \hlnum{TRUE}\hlstd{))} \hlopt{+}
 \hlkwd{theme}\hlstd{(}\hlkwc{legend.position} \hlstd{=} \hlstr{"top"}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_bar-5} 
\begin{kframe}\begin{alltt}
\hlcom{# To show (e.g.) means, you need geom_col()}
\hlstd{df} \hlkwb{<-} \hlkwd{data.frame}\hlstd{(}\hlkwc{trt} \hlstd{=} \hlkwd{c}\hlstd{(}\hlstr{"a"}\hlstd{,} \hlstr{"b"}\hlstd{,} \hlstr{"c"}\hlstd{),} \hlkwc{outcome} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{2.3}\hlstd{,} \hlnum{1.9}\hlstd{,} \hlnum{3.2}\hlstd{))}
\hlkwd{ggplot}\hlstd{(df,} \hlkwd{aes}\hlstd{(trt, outcome))} \hlopt{+}
  \hlkwd{geom_col}\hlstd{()}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_bar-6} 
\begin{kframe}\begin{alltt}
\hlcom{# But geom_point() displays exactly the same information and doesn't}
\hlcom{# require the y-axis to touch zero.}
\hlkwd{ggplot}\hlstd{(df,} \hlkwd{aes}\hlstd{(trt, outcome))} \hlopt{+}
  \hlkwd{geom_point}\hlstd{()}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_bar-7} 
\begin{kframe}\begin{alltt}
\hlcom{# You can also use geom_bar() with continuous data, in which case}
\hlcom{# it will show counts at unique locations}
\hlstd{df} \hlkwb{<-} \hlkwd{data.frame}\hlstd{(}\hlkwc{x} \hlstd{=} \hlkwd{rep}\hlstd{(}\hlkwd{c}\hlstd{(}\hlnum{2.9}\hlstd{,} \hlnum{3.1}\hlstd{,} \hlnum{4.5}\hlstd{),} \hlkwd{c}\hlstd{(}\hlnum{5}\hlstd{,} \hlnum{10}\hlstd{,} \hlnum{4}\hlstd{)))}
\hlkwd{ggplot}\hlstd{(df,} \hlkwd{aes}\hlstd{(x))} \hlopt{+} \hlkwd{geom_bar}\hlstd{()}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_bar-8} 
\begin{kframe}\begin{alltt}
\hlcom{# cf. a histogram of the same data}
\hlkwd{ggplot}\hlstd{(df,} \hlkwd{aes}\hlstd{(x))} \hlopt{+} \hlkwd{geom_histogram}\hlstd{(}\hlkwc{binwidth} \hlstd{=} \hlnum{0.5}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_bar-9} 
\end{knitrout}


\section{geom\_bin\_2d}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlcom{### Name: geom_bin_2d}
\hlcom{### Title: Heatmap of 2d bin counts}
\hlcom{### Aliases: geom_bin_2d geom_bin2d stat_bin_2d stat_bin2d}

\hlcom{### ** Examples}

\hlstd{d} \hlkwb{<-} \hlkwd{ggplot}\hlstd{(diamonds,} \hlkwd{aes}\hlstd{(x, y))} \hlopt{+} \hlkwd{xlim}\hlstd{(}\hlnum{4}\hlstd{,} \hlnum{10}\hlstd{)} \hlopt{+} \hlkwd{ylim}\hlstd{(}\hlnum{4}\hlstd{,} \hlnum{10}\hlstd{)}
\hlstd{d} \hlopt{+} \hlkwd{geom_bin_2d}\hlstd{()}
\end{alltt}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning: Removed 478 rows containing non-finite values (stat\_bin2d).}}\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_bin_2d-1} 
\begin{kframe}\begin{alltt}
\hlcom{# You can control the size of the bins by specifying the number of}
\hlcom{# bins in each direction:}
\hlstd{d} \hlopt{+} \hlkwd{geom_bin_2d}\hlstd{(}\hlkwc{bins} \hlstd{=} \hlnum{10}\hlstd{)}
\end{alltt}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning: Removed 478 rows containing non-finite values (stat\_bin2d).}}

{\ttfamily\noindent\color{warningcolor}{\#\# Warning: Removed 4 rows containing missing values (geom\_tile).}}\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_bin_2d-2} 
\begin{kframe}\begin{alltt}
\hlstd{d} \hlopt{+} \hlkwd{geom_bin_2d}\hlstd{(}\hlkwc{bins} \hlstd{=} \hlnum{30}\hlstd{)}
\end{alltt}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning: Removed 478 rows containing non-finite values (stat\_bin2d).}}\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_bin_2d-3} 
\begin{kframe}\begin{alltt}
\hlcom{# Or by specifying the width of the bins}
\hlstd{d} \hlopt{+} \hlkwd{geom_bin_2d}\hlstd{(}\hlkwc{binwidth} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{0.1}\hlstd{,} \hlnum{0.1}\hlstd{))}
\end{alltt}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning: Removed 478 rows containing non-finite values (stat\_bin2d).}}\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_bin_2d-4} 
\end{knitrout}


\section{geom\_bin2d}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlcom{### Name: geom_bin_2d}
\hlcom{### Title: Heatmap of 2d bin counts}
\hlcom{### Aliases: geom_bin_2d geom_bin2d stat_bin_2d stat_bin2d}

\hlcom{### ** Examples}

\hlstd{d} \hlkwb{<-} \hlkwd{ggplot}\hlstd{(diamonds,} \hlkwd{aes}\hlstd{(x, y))} \hlopt{+} \hlkwd{xlim}\hlstd{(}\hlnum{4}\hlstd{,} \hlnum{10}\hlstd{)} \hlopt{+} \hlkwd{ylim}\hlstd{(}\hlnum{4}\hlstd{,} \hlnum{10}\hlstd{)}
\hlstd{d} \hlopt{+} \hlkwd{geom_bin_2d}\hlstd{()}
\end{alltt}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning: Removed 478 rows containing non-finite values (stat\_bin2d).}}\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_bin2d-1} 
\begin{kframe}\begin{alltt}
\hlcom{# You can control the size of the bins by specifying the number of}
\hlcom{# bins in each direction:}
\hlstd{d} \hlopt{+} \hlkwd{geom_bin_2d}\hlstd{(}\hlkwc{bins} \hlstd{=} \hlnum{10}\hlstd{)}
\end{alltt}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning: Removed 478 rows containing non-finite values (stat\_bin2d).}}

{\ttfamily\noindent\color{warningcolor}{\#\# Warning: Removed 4 rows containing missing values (geom\_tile).}}\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_bin2d-2} 
\begin{kframe}\begin{alltt}
\hlstd{d} \hlopt{+} \hlkwd{geom_bin_2d}\hlstd{(}\hlkwc{bins} \hlstd{=} \hlnum{30}\hlstd{)}
\end{alltt}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning: Removed 478 rows containing non-finite values (stat\_bin2d).}}\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_bin2d-3} 
\begin{kframe}\begin{alltt}
\hlcom{# Or by specifying the width of the bins}
\hlstd{d} \hlopt{+} \hlkwd{geom_bin_2d}\hlstd{(}\hlkwc{binwidth} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{0.1}\hlstd{,} \hlnum{0.1}\hlstd{))}
\end{alltt}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning: Removed 478 rows containing non-finite values (stat\_bin2d).}}\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_bin2d-4} 
\end{knitrout}


\section{geom\_blank}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlcom{### Name: geom_blank}
\hlcom{### Title: Draw nothing}
\hlcom{### Aliases: geom_blank}

\hlcom{### ** Examples}

\hlkwd{ggplot}\hlstd{(mtcars,} \hlkwd{aes}\hlstd{(wt, mpg))}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_blank-1} 
\begin{kframe}\begin{alltt}
\hlcom{# Nothing to see here!}
\end{alltt}
\end{kframe}
\end{knitrout}


\section{geom\_boxplot}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlcom{### Name: geom_boxplot}
\hlcom{### Title: A box and whiskers plot (in the style of Tukey)}
\hlcom{### Aliases: geom_boxplot stat_boxplot}

\hlcom{### ** Examples}

\hlstd{p} \hlkwb{<-} \hlkwd{ggplot}\hlstd{(mpg,} \hlkwd{aes}\hlstd{(class, hwy))}
\hlstd{p} \hlopt{+} \hlkwd{geom_boxplot}\hlstd{()}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_boxplot-1} 
\begin{kframe}\begin{alltt}
\hlcom{# Orientation follows the discrete axis}
\hlkwd{ggplot}\hlstd{(mpg,} \hlkwd{aes}\hlstd{(hwy, class))} \hlopt{+} \hlkwd{geom_boxplot}\hlstd{()}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_boxplot-2} 
\begin{kframe}\begin{alltt}
\hlstd{p} \hlopt{+} \hlkwd{geom_boxplot}\hlstd{(}\hlkwc{notch} \hlstd{=} \hlnum{TRUE}\hlstd{)}
\end{alltt}


{\ttfamily\noindent\itshape\color{messagecolor}{\#\# notch went outside hinges. Try setting notch=FALSE.\\\#\# notch went outside hinges. Try setting notch=FALSE.}}\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_boxplot-3} 
\begin{kframe}\begin{alltt}
\hlstd{p} \hlopt{+} \hlkwd{geom_boxplot}\hlstd{(}\hlkwc{varwidth} \hlstd{=} \hlnum{TRUE}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_boxplot-4} 
\begin{kframe}\begin{alltt}
\hlstd{p} \hlopt{+} \hlkwd{geom_boxplot}\hlstd{(}\hlkwc{fill} \hlstd{=} \hlstr{"white"}\hlstd{,} \hlkwc{colour} \hlstd{=} \hlstr{"#3366FF"}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_boxplot-5} 
\begin{kframe}\begin{alltt}
\hlcom{# By default, outlier points match the colour of the box. Use}
\hlcom{# outlier.colour to override}
\hlstd{p} \hlopt{+} \hlkwd{geom_boxplot}\hlstd{(}\hlkwc{outlier.colour} \hlstd{=} \hlstr{"red"}\hlstd{,} \hlkwc{outlier.shape} \hlstd{=} \hlnum{1}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_boxplot-6} 
\begin{kframe}\begin{alltt}
\hlcom{# Remove outliers when overlaying boxplot with original data points}
\hlstd{p} \hlopt{+} \hlkwd{geom_boxplot}\hlstd{(}\hlkwc{outlier.shape} \hlstd{=} \hlnum{NA}\hlstd{)} \hlopt{+} \hlkwd{geom_jitter}\hlstd{(}\hlkwc{width} \hlstd{=} \hlnum{0.2}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_boxplot-7} 
\begin{kframe}\begin{alltt}
\hlcom{# Boxplots are automatically dodged when any aesthetic is a factor}
\hlstd{p} \hlopt{+} \hlkwd{geom_boxplot}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{colour} \hlstd{= drv))}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_boxplot-8} 
\begin{kframe}\begin{alltt}
\hlcom{# You can also use boxplots with continuous x, as long as you supply}
\hlcom{# a grouping variable. cut_width is particularly useful}
\hlkwd{ggplot}\hlstd{(diamonds,} \hlkwd{aes}\hlstd{(carat, price))} \hlopt{+}
  \hlkwd{geom_boxplot}\hlstd{()}
\end{alltt}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning: Continuous x aesthetic -- did you forget aes(group=...)?}}\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_boxplot-9} 
\begin{kframe}\begin{alltt}
\hlkwd{ggplot}\hlstd{(diamonds,} \hlkwd{aes}\hlstd{(carat, price))} \hlopt{+}
  \hlkwd{geom_boxplot}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{group} \hlstd{=} \hlkwd{cut_width}\hlstd{(carat,} \hlnum{0.25}\hlstd{)))}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_boxplot-10} 
\begin{kframe}\begin{alltt}
\hlcom{# Adjust the transparency of outliers using outlier.alpha}
\hlkwd{ggplot}\hlstd{(diamonds,} \hlkwd{aes}\hlstd{(carat, price))} \hlopt{+}
  \hlkwd{geom_boxplot}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{group} \hlstd{=} \hlkwd{cut_width}\hlstd{(carat,} \hlnum{0.25}\hlstd{)),} \hlkwc{outlier.alpha} \hlstd{=} \hlnum{0.1}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_boxplot-11} 
\begin{kframe}\begin{alltt}
\hlcom{## No test: }
\hlcom{# It's possible to draw a boxplot with your own computations if you}
\hlcom{# use stat = "identity":}
\hlstd{y} \hlkwb{<-} \hlkwd{rnorm}\hlstd{(}\hlnum{100}\hlstd{)}
\hlstd{df} \hlkwb{<-} \hlkwd{data.frame}\hlstd{(}
  \hlkwc{x} \hlstd{=} \hlnum{1}\hlstd{,}
  \hlkwc{y0} \hlstd{=} \hlkwd{min}\hlstd{(y),}
  \hlkwc{y25} \hlstd{=} \hlkwd{quantile}\hlstd{(y,} \hlnum{0.25}\hlstd{),}
  \hlkwc{y50} \hlstd{=} \hlkwd{median}\hlstd{(y),}
  \hlkwc{y75} \hlstd{=} \hlkwd{quantile}\hlstd{(y,} \hlnum{0.75}\hlstd{),}
  \hlkwc{y100} \hlstd{=} \hlkwd{max}\hlstd{(y)}
\hlstd{)}
\hlkwd{ggplot}\hlstd{(df,} \hlkwd{aes}\hlstd{(x))} \hlopt{+}
  \hlkwd{geom_boxplot}\hlstd{(}
   \hlkwd{aes}\hlstd{(}\hlkwc{ymin} \hlstd{= y0,} \hlkwc{lower} \hlstd{= y25,} \hlkwc{middle} \hlstd{= y50,} \hlkwc{upper} \hlstd{= y75,} \hlkwc{ymax} \hlstd{= y100),}
   \hlkwc{stat} \hlstd{=} \hlstr{"identity"}
 \hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_boxplot-12} 
\begin{kframe}\begin{alltt}
\hlcom{## End(No test)}
\end{alltt}
\end{kframe}
\end{knitrout}


\section{geom\_col}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlcom{### Name: geom_bar}
\hlcom{### Title: Bar charts}
\hlcom{### Aliases: geom_bar geom_col stat_count}

\hlcom{### ** Examples}

\hlcom{# geom_bar is designed to make it easy to create bar charts that show}
\hlcom{# counts (or sums of weights)}
\hlstd{g} \hlkwb{<-} \hlkwd{ggplot}\hlstd{(mpg,} \hlkwd{aes}\hlstd{(class))}
\hlcom{# Number of cars in each class:}
\hlstd{g} \hlopt{+} \hlkwd{geom_bar}\hlstd{()}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_col-1} 
\begin{kframe}\begin{alltt}
\hlcom{# Total engine displacement of each class}
\hlstd{g} \hlopt{+} \hlkwd{geom_bar}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{weight} \hlstd{= displ))}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_col-2} 
\begin{kframe}\begin{alltt}
\hlcom{# Map class to y instead to flip the orientation}
\hlkwd{ggplot}\hlstd{(mpg)} \hlopt{+} \hlkwd{geom_bar}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{y} \hlstd{= class))}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_col-3} 
\begin{kframe}\begin{alltt}
\hlcom{# Bar charts are automatically stacked when multiple bars are placed}
\hlcom{# at the same location. The order of the fill is designed to match}
\hlcom{# the legend}
\hlstd{g} \hlopt{+} \hlkwd{geom_bar}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{fill} \hlstd{= drv))}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_col-4} 
\begin{kframe}\begin{alltt}
\hlcom{# If you need to flip the order (because you've flipped the orientation)}
\hlcom{# call position_stack() explicitly:}
\hlkwd{ggplot}\hlstd{(mpg,} \hlkwd{aes}\hlstd{(}\hlkwc{y} \hlstd{= class))} \hlopt{+}
 \hlkwd{geom_bar}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{fill} \hlstd{= drv),} \hlkwc{position} \hlstd{=} \hlkwd{position_stack}\hlstd{(}\hlkwc{reverse} \hlstd{=} \hlnum{TRUE}\hlstd{))} \hlopt{+}
 \hlkwd{theme}\hlstd{(}\hlkwc{legend.position} \hlstd{=} \hlstr{"top"}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_col-5} 
\begin{kframe}\begin{alltt}
\hlcom{# To show (e.g.) means, you need geom_col()}
\hlstd{df} \hlkwb{<-} \hlkwd{data.frame}\hlstd{(}\hlkwc{trt} \hlstd{=} \hlkwd{c}\hlstd{(}\hlstr{"a"}\hlstd{,} \hlstr{"b"}\hlstd{,} \hlstr{"c"}\hlstd{),} \hlkwc{outcome} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{2.3}\hlstd{,} \hlnum{1.9}\hlstd{,} \hlnum{3.2}\hlstd{))}
\hlkwd{ggplot}\hlstd{(df,} \hlkwd{aes}\hlstd{(trt, outcome))} \hlopt{+}
  \hlkwd{geom_col}\hlstd{()}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_col-6} 
\begin{kframe}\begin{alltt}
\hlcom{# But geom_point() displays exactly the same information and doesn't}
\hlcom{# require the y-axis to touch zero.}
\hlkwd{ggplot}\hlstd{(df,} \hlkwd{aes}\hlstd{(trt, outcome))} \hlopt{+}
  \hlkwd{geom_point}\hlstd{()}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_col-7} 
\begin{kframe}\begin{alltt}
\hlcom{# You can also use geom_bar() with continuous data, in which case}
\hlcom{# it will show counts at unique locations}
\hlstd{df} \hlkwb{<-} \hlkwd{data.frame}\hlstd{(}\hlkwc{x} \hlstd{=} \hlkwd{rep}\hlstd{(}\hlkwd{c}\hlstd{(}\hlnum{2.9}\hlstd{,} \hlnum{3.1}\hlstd{,} \hlnum{4.5}\hlstd{),} \hlkwd{c}\hlstd{(}\hlnum{5}\hlstd{,} \hlnum{10}\hlstd{,} \hlnum{4}\hlstd{)))}
\hlkwd{ggplot}\hlstd{(df,} \hlkwd{aes}\hlstd{(x))} \hlopt{+} \hlkwd{geom_bar}\hlstd{()}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_col-8} 
\begin{kframe}\begin{alltt}
\hlcom{# cf. a histogram of the same data}
\hlkwd{ggplot}\hlstd{(df,} \hlkwd{aes}\hlstd{(x))} \hlopt{+} \hlkwd{geom_histogram}\hlstd{(}\hlkwc{binwidth} \hlstd{=} \hlnum{0.5}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_col-9} 
\end{knitrout}


\section{geom\_contour}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlcom{### Name: geom_contour}
\hlcom{### Title: 2D contours of a 3D surface}
\hlcom{### Aliases: geom_contour geom_contour_filled stat_contour}
\hlcom{###   stat_contour_filled}

\hlcom{### ** Examples}

\hlcom{# Basic plot}
\hlstd{v} \hlkwb{<-} \hlkwd{ggplot}\hlstd{(faithfuld,} \hlkwd{aes}\hlstd{(waiting, eruptions,} \hlkwc{z} \hlstd{= density))}
\hlstd{v} \hlopt{+} \hlkwd{geom_contour}\hlstd{()}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_contour-1} 
\begin{kframe}\begin{alltt}
\hlcom{# Or compute from raw data}
\hlkwd{ggplot}\hlstd{(faithful,} \hlkwd{aes}\hlstd{(waiting, eruptions))} \hlopt{+}
  \hlkwd{geom_density_2d}\hlstd{()}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_contour-2} 
\begin{kframe}\begin{alltt}
\hlcom{## No test: }
\hlcom{# use geom_contour_filled() for filled contours}
\hlstd{v} \hlopt{+} \hlkwd{geom_contour_filled}\hlstd{()}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_contour-3} 
\begin{kframe}\begin{alltt}
\hlcom{# Setting bins creates evenly spaced contours in the range of the data}
\hlstd{v} \hlopt{+} \hlkwd{geom_contour}\hlstd{(}\hlkwc{bins} \hlstd{=} \hlnum{3}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_contour-4} 
\begin{kframe}\begin{alltt}
\hlstd{v} \hlopt{+} \hlkwd{geom_contour}\hlstd{(}\hlkwc{bins} \hlstd{=} \hlnum{5}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_contour-5} 
\begin{kframe}\begin{alltt}
\hlcom{# Setting binwidth does the same thing, parameterised by the distance}
\hlcom{# between contours}
\hlstd{v} \hlopt{+} \hlkwd{geom_contour}\hlstd{(}\hlkwc{binwidth} \hlstd{=} \hlnum{0.01}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_contour-6} 
\begin{kframe}\begin{alltt}
\hlstd{v} \hlopt{+} \hlkwd{geom_contour}\hlstd{(}\hlkwc{binwidth} \hlstd{=} \hlnum{0.001}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_contour-7} 
\begin{kframe}\begin{alltt}
\hlcom{# Other parameters}
\hlstd{v} \hlopt{+} \hlkwd{geom_contour}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{colour} \hlstd{=} \hlkwd{after_stat}\hlstd{(level)))}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_contour-8} 
\begin{kframe}\begin{alltt}
\hlstd{v} \hlopt{+} \hlkwd{geom_contour}\hlstd{(}\hlkwc{colour} \hlstd{=} \hlstr{"red"}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_contour-9} 
\begin{kframe}\begin{alltt}
\hlstd{v} \hlopt{+} \hlkwd{geom_raster}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{fill} \hlstd{= density))} \hlopt{+}
  \hlkwd{geom_contour}\hlstd{(}\hlkwc{colour} \hlstd{=} \hlstr{"white"}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_contour-10} 
\begin{kframe}\begin{alltt}
\hlcom{# Irregular data}
\hlkwa{if} \hlstd{(}\hlkwd{requireNamespace}\hlstd{(}\hlstr{"interp"}\hlstd{)) \{}
  \hlcom{# Use a dataset from the interp package}
  \hlkwd{data}\hlstd{(franke,} \hlkwc{package} \hlstd{=} \hlstr{"interp"}\hlstd{)}
  \hlstd{origdata} \hlkwb{<-} \hlkwd{as.data.frame}\hlstd{(interp}\hlopt{::}\hlkwd{franke.data}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{1}\hlstd{, franke))}
  \hlstd{grid} \hlkwb{<-} \hlkwd{with}\hlstd{(origdata, interp}\hlopt{::}\hlkwd{interp}\hlstd{(x, y, z))}
  \hlstd{griddf} \hlkwb{<-} \hlkwd{subset}\hlstd{(}\hlkwd{data.frame}\hlstd{(}\hlkwc{x} \hlstd{=} \hlkwd{rep}\hlstd{(grid}\hlopt{$}\hlstd{x,} \hlkwd{nrow}\hlstd{(grid}\hlopt{$}\hlstd{z)),}
                              \hlkwc{y} \hlstd{=} \hlkwd{rep}\hlstd{(grid}\hlopt{$}\hlstd{y,} \hlkwc{each} \hlstd{=} \hlkwd{ncol}\hlstd{(grid}\hlopt{$}\hlstd{z)),}
                              \hlkwc{z} \hlstd{=} \hlkwd{as.numeric}\hlstd{(grid}\hlopt{$}\hlstd{z)),}
                   \hlopt{!}\hlkwd{is.na}\hlstd{(z))}
  \hlkwd{ggplot}\hlstd{(griddf,} \hlkwd{aes}\hlstd{(x, y,} \hlkwc{z} \hlstd{= z))} \hlopt{+}
    \hlkwd{geom_contour_filled}\hlstd{()} \hlopt{+}
    \hlkwd{geom_point}\hlstd{(}\hlkwc{data} \hlstd{= origdata)}
\hlstd{\}} \hlkwa{else}
  \hlkwd{message}\hlstd{(}\hlstr{"Irregular data requires the 'interp' package"}\hlstd{)}
\end{alltt}


{\ttfamily\noindent\itshape\color{messagecolor}{\#\# Loading required namespace: interp}}

{\ttfamily\noindent\itshape\color{messagecolor}{\#\# Irregular data requires the 'interp' package}}\begin{alltt}
\hlcom{## End(No test)}
\end{alltt}
\end{kframe}
\end{knitrout}


\section{geom\_contour\_filled}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlcom{### Name: geom_contour}
\hlcom{### Title: 2D contours of a 3D surface}
\hlcom{### Aliases: geom_contour geom_contour_filled stat_contour}
\hlcom{###   stat_contour_filled}

\hlcom{### ** Examples}

\hlcom{# Basic plot}
\hlstd{v} \hlkwb{<-} \hlkwd{ggplot}\hlstd{(faithfuld,} \hlkwd{aes}\hlstd{(waiting, eruptions,} \hlkwc{z} \hlstd{= density))}
\hlstd{v} \hlopt{+} \hlkwd{geom_contour}\hlstd{()}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_contour_filled-1} 
\begin{kframe}\begin{alltt}
\hlcom{# Or compute from raw data}
\hlkwd{ggplot}\hlstd{(faithful,} \hlkwd{aes}\hlstd{(waiting, eruptions))} \hlopt{+}
  \hlkwd{geom_density_2d}\hlstd{()}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_contour_filled-2} 
\begin{kframe}\begin{alltt}
\hlcom{## No test: }
\hlcom{# use geom_contour_filled() for filled contours}
\hlstd{v} \hlopt{+} \hlkwd{geom_contour_filled}\hlstd{()}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_contour_filled-3} 
\begin{kframe}\begin{alltt}
\hlcom{# Setting bins creates evenly spaced contours in the range of the data}
\hlstd{v} \hlopt{+} \hlkwd{geom_contour}\hlstd{(}\hlkwc{bins} \hlstd{=} \hlnum{3}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_contour_filled-4} 
\begin{kframe}\begin{alltt}
\hlstd{v} \hlopt{+} \hlkwd{geom_contour}\hlstd{(}\hlkwc{bins} \hlstd{=} \hlnum{5}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_contour_filled-5} 
\begin{kframe}\begin{alltt}
\hlcom{# Setting binwidth does the same thing, parameterised by the distance}
\hlcom{# between contours}
\hlstd{v} \hlopt{+} \hlkwd{geom_contour}\hlstd{(}\hlkwc{binwidth} \hlstd{=} \hlnum{0.01}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_contour_filled-6} 
\begin{kframe}\begin{alltt}
\hlstd{v} \hlopt{+} \hlkwd{geom_contour}\hlstd{(}\hlkwc{binwidth} \hlstd{=} \hlnum{0.001}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_contour_filled-7} 
\begin{kframe}\begin{alltt}
\hlcom{# Other parameters}
\hlstd{v} \hlopt{+} \hlkwd{geom_contour}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{colour} \hlstd{=} \hlkwd{after_stat}\hlstd{(level)))}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_contour_filled-8} 
\begin{kframe}\begin{alltt}
\hlstd{v} \hlopt{+} \hlkwd{geom_contour}\hlstd{(}\hlkwc{colour} \hlstd{=} \hlstr{"red"}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_contour_filled-9} 
\begin{kframe}\begin{alltt}
\hlstd{v} \hlopt{+} \hlkwd{geom_raster}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{fill} \hlstd{= density))} \hlopt{+}
  \hlkwd{geom_contour}\hlstd{(}\hlkwc{colour} \hlstd{=} \hlstr{"white"}\hlstd{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/021-ggplot2-geoms-geom_contour_filled-10} 
\begin{kframe}\begin{alltt}
\hlcom{# Irregular data}
\hlkwa{if} \hlstd{(}\hlkwd{requireNamespace}\hlstd{(}\hlstr{"interp"}\hlstd{)) \{}
  \hlcom{# Use a dataset from the interp package}
  \hlkwd{data}\hlstd{(franke,} \hlkwc{package} \hlstd{=} \hlstr{"interp"}\hlstd{)}
  \hlstd{origdata} \hlkwb{<-} \hlkwd{as.data.frame}\hlstd{(interp}\hlopt{::}\hlkwd{franke.data}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{1}\hlstd{, franke))}
  \hlstd{grid} \hlkwb{<-} \hlkwd{with}\hlstd{(origdata, interp}\hlopt{::}\hlkwd{interp}\hlstd{(x, y, z))}
  \hlstd{griddf} \hlkwb{<-} \hlkwd{subset}\hlstd{(}\hlkwd{data.frame}\hlstd{(}\hlkwc{x} \hlstd{=} \hlkwd{rep}\hlstd{(grid}\hlopt{$}\hlstd{x,} \hlkwd{nrow}\hlstd{(grid}\hlopt{$}\hlstd{z)),}
                              \hlkwc{y} \hlstd{=} \hlkwd{rep}\hlstd{(grid}\hlopt{$}\hlstd{y,} \hlkwc{each} \hlstd{=} \hlkwd{ncol}\hlstd{(grid}\hlopt{$}\hlstd{z)),}
                              \hlkwc{z} \hlstd{=} \hlkwd{as.numeric}\hlstd{(grid}\hlopt{$}\hlstd{z)),}
                   \hlopt{!}\hlkwd{is.na}\hlstd{(z))}
  \hlkwd{ggplot}\hlstd{(griddf,} \hlkwd{aes}\hlstd{(x, y,} \hlkwc{z} \hlstd{= z))} \hlopt{+}
    \hlkwd{geom_contour_filled}\hlstd{()} \hlopt{+}
    \hlkwd{geom_point}\hlstd{(}\hlkwc{data} \hlstd{= origdata)}
\hlstd{\}} \hlkwa{else}
  \hlkwd{message}\hlstd{(}\hlstr{"Irregular data requires the 'interp' package"}\hlstd{)}
\end{alltt}


{\ttfamily\noindent\itshape\color{messagecolor}{\#\# Loading required namespace: interp}}

{\ttfamily\noindent\itshape\color{messagecolor}{\#\# Irregular data requires the 'interp' package}}\begin{alltt}
\hlcom{## End(No test)}
\end{alltt}
\end{kframe}
\end{knitrout}



\end{document}
