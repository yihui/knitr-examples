---
title: Test the `exec` engine
--- 

# Simple example

```{exec, command='Rscript'}
1 + 1
```

```{exec, command='python'}
print(1 + 1)
```

`engine.opts` can also be used to pass options:

```{exec, engine.opts = list(command ='python')}
print(1 + 1)
```

# Options

All other options should be provided in the chunk option `engine.opts` (`command` can be optionally in `engine.opts`, too).

They can take character values or functions that returns character values.

## ext

```{exec, engine.opts = list(command='Rscript', ext = 'R')}
1 + 1
```

## file

```{r}
file2 <- function(code, file) {
  xfun::write_utf8("print('file2 executed')", file)
  file
}
```

```{exec, engine.opts=list(command = 'python', file = file2)}
print(1 + 1)
```

## args

```{r}
f_arg <- function(code, file) {
  # prepend a command
  xfun::append_utf8("print('# file modified in args')", file, sort = rev)
  file
}
```

```{exec, engine.opts=list(command = 'python', args = f_arg)}
print(1 + 1)
```

It can be combined with args1, e.g prepended line will be ignored

```{exec, engine.opts=list(command = 'python', args1 = '-x', args = f_arg)}
print(1 + 1)
```

args2 will be passed after. 

So command passed will be 

```
<command> <args1> <args(code, f)> <args2>
```

## Full path command

```{exec, command = Sys.which('python'), message = FALSE}
print("Full path command works")
```

# Don't execute

Will output nothing

```{exec, command = 'python', eval = FALSE}
print(1 + 1)
```

# Error is caught

```{exec, command = 'Rscript', error = TRUE}
print(1 + "")
```
